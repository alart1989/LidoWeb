<!DOCTYPE html><html><head><meta charset="utf-8"><title>Redirecting…</title>
<meta http-equiv="refresh" content="0; url=./wrap/">
<link rel="canonical" href="./wrap/">
<script>location.replace('./wrap/');</script>
</head><body><p>Redirecting to <a href="/wrap/wrap/">/wrap/wrap/</a>…</p>
    <script>
/* FAQ TOGGLE FIX (react-collapsed) */
(function(){
  console.log('FAQ TOGGLE FIX ACTIVE');

  // 1) CSS-оверрайд: делаем панели управляемыми классом .rc-open
  var style = document.createElement('style');
  style.id = 'rc-faq-fix-css';
  style.textContent = `
    .rc-faq-item [id^="react-collapsed-panel-"]{
      box-sizing:border-box;
      max-height:0 !important;
      overflow:hidden !important;
      opacity:0 !important;
      display:block !important; /* на всякий случай — чтобы не было display:none */
      transition:max-height .25s ease, opacity .2s linear;
    }
    .rc-faq-item.rc-open [id^="react-collapsed-panel-"]{
      max-height:2000px !important;
      overflow:visible !important;
      opacity:1 !important;
    }
  `;
  document.head.appendChild(style);

  function closestItem(el){
    while (el && el !== document.documentElement){
      if (el.matches && (el.matches('.sc-aXZVg') || el.hasAttribute('data-rc-faq') || el.hasAttribute('data-faq') || el.className.includes('faq')))
        return el;
      el = el.parentNode;
    }
    return null;
  }

  function normalizeToClosed(btn){
    var item = closestItem(btn); if (!item) return;
    var panelId = btn.getAttribute('aria-controls');
    var panel = panelId ? document.getElementById(panelId) : item.querySelector('[id^="react-collapsed-panel-"]');
    if (!panel) return;

    // Убираем «насильно открытые» инлайновые стили из снимка
    panel.removeAttribute('style');

    // Ставим семантику "закрыто"
    btn.setAttribute('aria-expanded','false');
    btn.setAttribute('data-state','closed');
    panel.setAttribute('aria-hidden','true');
    panel.setAttribute('data-state','closed');
    item.classList.remove('rc-open');

    // Помечаем элемент
    item.classList.add('rc-faq-item');
  }

  function toggleByButton(btn){
    var item = closestItem(btn); if (!item) return;
    var panelId = btn.getAttribute('aria-controls');
    var panel = panelId ? document.getElementById(panelId) : item.querySelector('[id^="react-collapsed-panel-"]');
    if (!panel) return;

    var isOpen = item.classList.contains('rc-open') ||
                 btn.getAttribute('aria-expanded') === 'true' ||
                 panel.getAttribute('aria-hidden') === 'false';

    if (isOpen){
      btn.setAttribute('aria-expanded','false');
      btn.setAttribute('data-state','closed');
      panel.setAttribute('aria-hidden','true');
      panel.setAttribute('data-state','closed');
      item.classList.remove('rc-open');
    } else {
      btn.setAttribute('aria-expanded','true');
      btn.setAttribute('data-state','open');
      panel.setAttribute('aria-hidden','false');
      panel.setAttribute('data-state','open');
      item.classList.add('rc-open');
    }
  }

  // 2) Инициализация: найдём все тумблеры и закроем
  document.querySelectorAll('[id^="react-collapsed-toggle-"]').forEach(normalizeToClosed);

  // 3) Клик-хэндлер (capture, чтобы не мешали «снимочные» слушатели)
  document.addEventListener('click', function(e){
    var btn = e.target.closest && e.target.closest('[id^="react-collapsed-toggle-"], [role="button"], button');
    if (!btn) return;
    // защита: работаем только внутри FAQ-блоков
    var item = closestItem(btn);
    if (!item) return;

    e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
    toggleByButton(btn);
  }, true);
})();
</script>


<script>
/* STAKE THEME LOCK + LOGO FIX ACTIVE */
(function(){
  var MAIN_BASE='https://lido-web-main.vercel.app/';

  // 1) Принудительно светлая тема
  try {
    document.documentElement.setAttribute('data-lido-theme','light');
    document.documentElement.classList.remove('dark');
    document.querySelectorAll('[data-lido-theme]').forEach(x=>x.setAttribute('data-lido-theme','light'));
    // подчистим localStorage/attrs с "theme"
    try {
      for (var i=0;i<localStorage.length;i++){
        var k = localStorage.key(i);
        if (/theme/i.test(k)) { localStorage.setItem(k,'light'); }
      }
    } catch(_) {}
  } catch(_) {}

  // 2) Выключаем переключатель темы (любые кнопки/иконки с "theme")
  var THEME_SEL = '[aria-label*="theme" i], [data-testid*="theme" i], .theme-toggle, .ThemeToggle, button[class*="theme"], button[class*="Theme"]';
  document.addEventListener('click', function(e){
    var btn = e.target.closest && e.target.closest(THEME_SEL);
    if (!btn) return;
    e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
  }, true);

  // 3) Лого → на главную (mine-site)
  //   3.1 перепишем href в DOM
  try {
    document.querySelectorAll('a[href="/"], a[href^="https://lido.fi"], a[href^="http://lido.fi"]').forEach(function(a){
      a.setAttribute('href', MAIN_BASE + '/');
    });
  } catch(_) {}
  //   3.2 перехватим клики как страховку
  document.addEventListener('click', function(e){
    var a = e.target.closest && e.target.closest('a[href]');
    if (!a) return;
    var h = a.getAttribute('href') || '';
    if (h === '/' || /^https?:\/\/(?:www\.)?lido\.fi\/?$/.test(h)) {
      e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
      location.href = MAIN_BASE + '/';
    }
  }, true);

  console.log('STAKE THEME LOCK + LOGO FIX ACTIVE');
})();
</script>

<script>
/* STAKE LOGO ONLY FIX ACTIVE */
(function(){
  var MAIN_BASE='https://lido-web-main.vercel.app/';
  var LOGO_SEL='a[aria-label="Main page"], a[aria-label*="main page" i], a[aria-label*="logo" i], .header-content_logoWrapper__SdLXi a, header .header-content_logoWrapper__SdLXi a, header a:has(svg.header-content_textLogo__4DBN3), header a:has(svg.header-content_textLogoML__sH1Rj)';
  // оффлайн мы уже поправили href у лого; страхуемся рантаймом
  document.addEventListener('click', function(e){
    var a = e.target.closest && e.target.closest('a[href]');
    if (!a) return;
    if (a.matches(LOGO_SEL)) {
      e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
      location.href = MAIN_BASE + '/';
    }
  }, true);
  console.log('STAKE LOGO ONLY FIX ACTIVE');
})();
</script>

<script>
/* HOTFIX LOGO vs STAKE ACTIVE */
(function(){
  var MAIN_BASE='https://lido-web-main.vercel.app/';
  var LOGO_SEL='a:has([data-testid="lidoLogo"]), .styles__LogoLidoStyle-sc-1gnkrmu-0 a, a[aria-label="Main page"], a[aria-label*="logo" i]';

  function isStakeMenuAnchor(a){
    if (!a) return false;
    try{
      if (a.matches(LOGO_SEL)) return false;
      var txt=(a.textContent||'').trim().toLowerCase();
      if (txt!=='stake') return false;
      return !!a.closest('header');
    }catch(_){return false;}
  }

  // страхуем клики (capture): только лого → 8000, только пункт Stake (в хедере) → "/"
  document.addEventListener('click', function(e){
    var a = e.target.closest && e.target.closest('a');
    if (!a) return;

    // клик по ЛОГО
    if (a.matches(LOGO_SEL) || (a.querySelector && a.querySelector('[data-testid="lidoLogo"]'))) {
      e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
      location.href = MAIN_BASE + '/';
      return;
    }

    // клик по пункту "Stake" в шапке
    if (isStakeMenuAnchor(a)) {
      e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
      location.href = '/';
      return;
    }
  }, true);

  // оффлайн-исправления в рантайме на всякий случай:
  // 1) делаем у ЛОГО нормальный href и снимаем «заглушки»
  document.querySelectorAll(LOGO_SEL).forEach(function(a){
    a.setAttribute('href', MAIN_BASE + '/');
    a.removeAttribute('aria-disabled');
    a.removeAttribute('data-mirror-disabled');
    a.removeAttribute('tabindex');
  });
  // 2) если у пункта "Stake" почему-то href на 8000 — вернём "/"
  document.querySelectorAll('header a').forEach(function(a){
    var txt=(a.textContent||'').trim().toLowerCase();
    if (txt==='stake'){
      var href=a.getAttribute('href')||'';
      if (/^https?:\/\/localhost:8000\/?$/.test(href)) a.setAttribute('href','/');
    }
  });

  console.log('HOTFIX LOGO vs STAKE ACTIVE');
})();
</script>

<script>
/* VERCEL LINK GUARD ACTIVE */
(function(){
  var MAIN='https://lido-web-mine-site.vercel.app', STAKE='https://lido-web-stake-site.vercel.app';

  function map(url){
    try{
      var s=String(url||'');
      if (/^https?:\/\/localhost:8000\b/.test(s)) return MAIN+'/';
      if (/^https?:\/\/localhost:8001\b/.test(s)) return STAKE+'/';
      if (/^https?:\/\/(?:www\.)?lido\.fi\/?$/i.test(s)) return MAIN+'/';
      if (/^https?:\/\/(?:www\.)?stake\.lido\.fi/i.test(s)) return STAKE+'/';
    }catch(_){}
    return null;
  }

  // перепишем href у всех ссылок
  document.querySelectorAll('a[href]').forEach(function(a){
    var next = map(a.getAttribute('href')||'');
    if (next) a.setAttribute('href', next);
  });

  // перехват кликов (capture)
  document.addEventListener('click', function(e){
    var a = e.target.closest && e.target.closest('a[href]');
    if (!a) return;
    var next = map(a.getAttribute('href')||'');
    if (next){ e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation(); location.href = next; }
  }, true);
})();
</script></body></html>